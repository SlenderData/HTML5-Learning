<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", "PingFang SC", Arial, sans-serif;
        background-color: #D6E4E5;
        color: #333;
        padding: 0;
    }

    button {
        background-color: #D6E4E5;
        border: none;
        border-radius: 10px;
        margin-left: 10px;
        cursor: pointer;
        font-weight: bold;
        padding: 10px;
    }

    td > div {
        width: 50px;
        height: 75px;
        margin: 5px;
        border-radius: 5px;
        border: thin dashed #333333;
        overflow: hidden;
    }

    img {
        width: 50px;
        height: 75px;
    }

    .Container {
        background-color: #EFF5F5;
        border-radius: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        margin: 20px auto;
        padding: 20px;
        overflow: hidden;
        width: 900px;
        text-align: center;
    }

</style>
<body>
<div class="Container">
    <span id="stepCounts">å½“å‰æ­¥æ•°ï¼š</span>
    <button id="reloadButton">é‡æ–°æ¸¸æˆ</button>
</div>
<div id="deckContainer" class="Container">
    <p>Aæ¡†ï¼ˆç‰Œå †ï¼‰</p>
    <table style="margin: auto;">
        <tr>
            <td id="A01">
                <div><img/></div>
            </td>
            <td id="A02">
                <div><img/></div>
            </td>
            <td id="A03">
                <div><img/></div>
            </td>
            <td id="A04">
                <div><img/></div>
            </td>
            <td id="A05">
                <div><img/></div>
            </td>
            <td id="A06">
                <div><img/></div>
            </td>
            <td id="A07">
                <div><img/></div>
            </td>
            <td id="A08">
                <div><img/></div>
            </td>
            <td id="A09">
                <div><img/></div>
            </td>
            <td id="A10">
                <div><img/></div>
            </td>
            <td id="A11">
                <div><img/></div>
            </td>
            <td id="A12">
                <div><img/></div>
            </td>
            <td id="A13">
                <div><img/></div>
            </td>
        </tr>
    </table>
</div>
<div id="dropZone" class="Container">
    <p>Bæ¡†ï¼ˆç›®æ ‡åŒºåŸŸï¼‰</p>
    <table style="margin: auto;">
        <tr>
            <td id="B01">
                <div><img/></div>
            </td>
            <td id="B02">
                <div><img/></div>
            </td>
            <td id="B03">
                <div><img/></div>
            </td>
            <td id="B04">
                <div><img/></div>
            </td>
            <td id="B05">
                <div><img/></div>
            </td>
        </tr>
    </table>
</div>
<div id="musicPlayer" class="Container">
    <p>ğŸƒè¯»ä¸æ‡‚æˆ‘çš„çŒªè‚‰è„¸ğŸ·</p>
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=350 height=86
            src="https://music.163.com/outchain/player?type=2&id=1386002700&auto=1&height=66"></iframe>
</div>
</body>
<script>
    // åˆå§‹åŒ–å˜é‡
    let moves = 0; // è®°å½•ç§»åŠ¨æ¬¡æ•°
    const suits = ['clubs', 'diamonds', 'hearts', 'spades']; // èŠ±è‰²æ•°ç»„
    let currentSuit = suits[Math.floor(Math.random() * suits.length)]; // éšæœºé€‰æ‹©ä¸€ä¸ªèŠ±è‰²
    let cards = []; // å­˜å‚¨éšæœºé¡ºåºçš„ç‰Œ
    let inDropZone = []; // å­˜å‚¨æ”¾å…¥Bæ¡†çš„ç‰Œ

    // åˆå§‹åŒ–ç‰Œå †
    function initDeck() {
        cards = Array.from({length: 13}, (_, i) => i + 1);
        cards = shuffle(cards); // æ‰“ä¹±ç‰Œçš„é¡ºåº
        updateDeckDisplay();
    }

    // æ‰“ä¹±æ•°ç»„
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // æ›´æ–°ç‰Œå †æ˜¾ç¤º
    function updateDeckDisplay() {
        for (let i = 0; i < cards.length; i++) {
            let cardElement = document.querySelector(`#A${String(i + 1).padStart(2, '0')} > div > img`);
            cardElement.src = 'img/card-back.webp'; // æ˜¾ç¤ºç‰ŒèƒŒ
            cardElement.setAttribute('data-card-value', cards[i]);
            cardElement.draggable = true;
            cardElement.ondragstart = dragStart;
        }
    }

    // æ‹–åŠ¨å¼€å§‹
    function dragStart(event) {
        event.dataTransfer.setData("text", event.target.getAttribute('data-card-value'));
        event.dataTransfer.setData("suit", currentSuit);
    }

    // å…è®¸æ‹–æ”¾
    function allowDrop(event) {
        event.preventDefault();
    }

    // å½“ç‰Œè¢«æ‹–å…¥Bæ¡†
    function drop(event) {
        event.preventDefault();
        if (inDropZone.length >= 5) return; // Bæ¡†å·²æ»¡
        let cardValue = event.dataTransfer.getData("text");
        let suit = event.dataTransfer.getData("suit");
        let cardImgPath = `img/${suit}/${cardValue.padStart(2, '0')}.jpg`;
        addCardToDropZone(cardImgPath, cardValue);
        moves++; // å¢åŠ æ­¥æ•°
        document.getElementById("stepCounts").textContent = `å½“å‰æ­¥æ•°ï¼š${moves}`;
        if (inDropZone.length === 5) {
            checkSequence();
        }
    }

    // æ£€æŸ¥æ˜¯å¦å½¢æˆé¡ºå­
    function checkSequence() {
        let sortedCards = inDropZone.map(Number).sort((a, b) => a - b);
        for (let i = 0; i < sortedCards.length - 1; i++) {
            if (sortedCards[i] + 1 !== sortedCards[i + 1]) {
                alert('ä¸æ»¡è¶³é¡ºå­è¦æ±‚ï¼Œè¯·è°ƒæ•´ï¼');
                return;
            }
        }
        alert('æ­å–œå®Œæˆæ¸¸æˆï¼');
    }

    // æ·»åŠ ç‰Œåˆ°Bæ¡†
    function addCardToDropZone(imgPath, cardValue) {
        let emptySlot = document.querySelector('#dropZone td:empty > div > img');
        if (emptySlot) {
            emptySlot.src = imgPath;
            inDropZone.push(cardValue);
        }
    }

    // ç»‘å®šæ‹–æ”¾äº‹ä»¶
    document.getElementById("dropZone").ondrop = drop;
    document.getElementById("dropZone").ondragover = allowDrop;

    // ç»‘å®šé‡æ–°å¼€å§‹æŒ‰é’®
    document.getElementById("reloadButton").addEventListener("click", () => {
// é‡ç½®æ¸¸æˆçŠ¶æ€
        moves = 0;
        document.getElementById("stepCounts").textContent = "å½“å‰æ­¥æ•°ï¼š";
        currentSuit = suits[Math.floor(Math.random() * suits.length)]; // é‡æ–°é€‰æ‹©ä¸€ä¸ªèŠ±è‰²
        inDropZone = []; // æ¸…ç©ºBæ¡†çš„ç‰Œ
        initDeck(); // é‡æ–°åˆå§‹åŒ–ç‰Œå †
        resetDropZone(); // æ¸…ç©ºå¹¶é‡ç½®Bæ¡†
    });

    // æ¸…ç©ºå¹¶é‡ç½®Bæ¡†
    function resetDropZone() {
        let dropZoneImages = document.querySelectorAll("#dropZone img");
        dropZoneImages.forEach(img => {
            img.src = ""; // æ¸…é™¤å›¾åƒ
            img.removeAttribute("data-card-value"); // ç§»é™¤ç‰Œå€¼å±æ€§
        });
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
    window.onload = () => {
        initDeck();
    };

    // å®ç°æ‹–åŠ¨æ”¾å›Aæ¡†çš„é€»è¾‘ï¼ˆå¯é€‰ï¼‰
    function returnToDeck(event) {
// ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é€»è¾‘ï¼Œå…è®¸ç”¨æˆ·å°†ç‰Œä»Bæ¡†æ‹–å›Aæ¡†
// æ³¨æ„æ›´æ–°ç‰Œçš„çŠ¶æ€å’Œæ˜¾ç¤ºï¼Œä»¥åŠç›¸å…³å˜é‡
    }

    // æ³¨æ„ï¼šè¿™ä¸ªç¤ºä¾‹æä¾›äº†åŸºæœ¬çš„æ¸¸æˆé€»è¾‘æ¡†æ¶ã€‚ä¸ºäº†å®ç°å®Œæ•´çš„æ¸¸æˆï¼Œå¯èƒ½è¿˜éœ€è¦æ·»åŠ é¢å¤–çš„é€»è¾‘ï¼Œå¦‚æ›´ç²¾ç»†çš„é”™è¯¯å¤„ç†ã€åŠ¨ç”»æ•ˆæœã€æˆ–æ”¹å–„ç”¨æˆ·äº¤äº’ä½“éªŒçš„åŠŸèƒ½ã€‚
</script>
</html>