<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Canvas</title>
</head>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", "PingFang SC", Arial, sans-serif;
        background-color: #D6E4E5;
        color: #333;
        padding: 0;
        margin: 0;
    }

    button {
        background-color: #D6E4E5;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        padding: 10px;
    }

    .inputArea {
        background-color: #EFF5F5;
        border-radius: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        margin: 50px 0 0 50px;
        padding: 20px;
        overflow: hidden;
        width: 460px;
        float: left;
    }

    .drawArea {
        background-color: #EFF5F5;
        border-radius: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        margin: 50px;
        padding: 20px;
        width: calc(100% - 690px);
        float: left;
        text-align: center;
    }
</style>
<body>
<div class="inputArea">
    <h1 style="text-align: center;">饼状图和柱状图绘制</h1><br>
    <form>
        <label for="title">请输入图表标题：</label>
        <input type="text" id="title" style="width: 300px; height: 1.5em;">
        <br><br>
        <label for="unit">请输入数据单位：</label>
        <input type="text" id="unit" style="width: 300px; height: 1.5em;">
        <br><br>
        <label for="data">请输入数据（用半角逗号分隔）：</label><br>
        <textarea id="data" style="width: 460px; height: 200px;"></textarea>
        <br><br>
        <div style="text-align: center">
            <button type="button" onclick="drawPieChart()">绘制饼状图</button>
            <button type="button" onclick="drawBarChart()">绘制柱状图</button>
        </div>
    </form>
</div>
<div class="drawArea">
    <canvas id="canvasChart" width="1000" height="800" style="border: 1px solid #000000;"></canvas>
</div>
</body>
<script>
    function drawPieChart() {
        let canvas = document.getElementById("canvasChart");
        let ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        let title = document.getElementById("title").value;
        let unit = document.getElementById("unit").value;
        let data = document.getElementById("data").value.split(",").map(Number);

        let total = data.reduce((a, b) => a + b, 0);
        let startAngle = 0;
        let endAngle = 0;

        for (let i = 0; i < data.length; i++) {
            ctx.fillStyle = `hsl(${i * 360 / data.length}, 100%, 50%)`;
            endAngle = startAngle + data[i] / total * 2 * Math.PI;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, canvas.height / 2);
            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.height / 2, startAngle, endAngle);
            ctx.fill();
            startAngle = endAngle;
        }

        ctx.fillStyle = "#000000";
        ctx.font = "bold 20px Arial";
        ctx.textAlign = "center";
        ctx.fillText(title, canvas.width / 2, 30);
        ctx.fillText(unit, canvas.width / 2, canvas.height - 30);
    }

</script>
</html>